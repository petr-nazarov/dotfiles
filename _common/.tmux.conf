# Set terminal type and enable RGB color
set -g default-terminal "xterm-256color"
set-option -ga terminal-overrides ",xterm-256color:RGB"
# Optional: for compatibility with Neovim and 24-bit
set -as terminal-features ",xterm-256color:RGB"

set-option -sg escape-time 10


set -g mouse on
set-option -g focus-events on
set -g allow-passthrough on
set -ga update-environment TERM
set -ga update-environment TERM_PROGRAM

# Enable native Mac OS X copy/paste
set-option -g default-command "/bin/bash -c 'which reattach-to-user-namespace >/dev/null && exec reattach-to-user-namespace $SHELL -l || exec $SHELL -l'"
# display of non-active windows
set-window-option -g automatic-rename off
# Prevent tmux from automatically renaming windows
set-option -g allow-rename off
# Start windows and panes at 1, not 0
set -g base-index 1
setw -g pane-base-index 1

# Ensure window index numbers are updated automatically when a window is closed
set -g renumber-windows on


# keybindings
set -g prefix C-a
unbind C-b
bind-key C-a send-prefix

unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind c new-window -c "#{pane_current_path}"
bind-key v copy-mode




bind -r j resize-pane -D 5
bind -r k resize-pane -U 5
bind -r l resize-pane -R 5
bind -r h resize-pane -L 5
bind -r m resize-pane -Z

set-window-option -g mode-keys vi

bind-key -T copy-mode-vi 'v' send -X begin-selection # start selecting text with "v"
bind-key -T copy-mode-vi 'y' send -X copy-selection # copy text with "y"

# Add 'yy' to copy the current line
bind-key -T copy-mode-vi 'y' if-shell -F "#{selection_present}" "send -X copy-selection" "send -X copy-line"

# remove delay for exiting insert mode with ESC in Neovim
set -sg escape-time 10

# tpm plugin
set -g @plugin 'tmux-plugins/tpm'

# list of tmux plugins
set -g @plugin 'christoomey/vim-tmux-navigator'
set -g @plugin 'tmux-plugins/tmux-sensible'


# Catppuccin Macchiato Palette
thm_bg="#24273a"
thm_fg="#cad3f5"
thm_cyan="#91d7e3"
thm_black="#1e2030"
thm_gray="#363a4f"
thm_magenta="#c6a0f6"
thm_pink="#f5bde6"
thm_red="#ed8796"
thm_green="#a6da95"
thm_yellow="#eed49f"
thm_blue="#8aadf4"
thm_orange="#f5a97f"
thm_black4="#5b6078"
# Status bar general
set -g status-position top 
set -g status-justify left
set -g status-style "bg=${thm_bg},fg=${thm_fg}"
set -g status-left-length "100"
set -g status-right-length "100"

# Messages
set -g message-style "fg=${thm_cyan},bg=${thm_gray},align=centre"
set -g message-command-style "fg=${thm_cyan},bg=${thm_gray},align=centre"

# Panes
set -g pane-border-style "fg=${thm_gray}"
set -g pane-active-border-style "fg=${thm_blue}"

# Windows
setw -g window-status-activity-style "fg=${thm_fg},bg=${thm_bg},none"
setw -g window-status-separator ""
setw -g window-status-style "fg=${thm_fg},bg=${thm_bg},none"

# Status Left
# Shows the session name in a blue pill
set -g status-left "#[fg=${thm_bg},bg=${thm_blue},bold]  #S #[fg=${thm_blue},bg=${thm_bg},nobold,nounderscore,noitalics]"

# Status Right
# Shows the host and the time
set -g status-right "#[fg=${thm_gray},bg=${thm_bg},nobold,nounderscore,noitalics]#[fg=${thm_blue},bg=${thm_gray}] 󰭦 %Y-%m-%d  %H:%M #[fg=${thm_magenta},bg=${thm_gray},nobold,nounderscore,noitalics]#[fg=${thm_bg},bg=${thm_magenta}] 󰃭 #(whoami) "

# Current Window
setw -g window-status-current-format "#[fg=${thm_bg},bg=${thm_orange}] #I #[fg=${thm_fg},bg=${thm_gray}] #W #[fg=${thm_gray},bg=${thm_bg},nobold]"

# Inactive Window
setw -g window-status-format "#[fg=${thm_fg},bg=${thm_bg}] #I #[fg=${thm_fg},bg=${thm_bg}] #W #[fg=${thm_bg},bg=${thm_bg},nobold]"


run '~/.tmux/plugins/tpm/tpm'

